// Import new components
import { HeaderView } from "./HeaderView.slint";
import { ButtonGridView } from "./ButtonGridView.slint";
import { LogListView } from "./LogListView.slint";
import { StatusBarView } from "./StatusBarView.slint";

export component MainWindow inherits Window {
    // --- Theme Colors ---
    property <color> color-background: #1e1e1e;       // Dark background
    property <color> color-text: #eeeeee;              // Light text
    property <color> color-text-muted: #aaaaaa;        // Muted text (e.g., time)
    property <color> color-accent: #007acc;           // Accent color (e.g., button hover/focus)
    property <color> color-button: #333333;            // Button background
    property <color> color-button-text: #eeeeee;       // Button text
    property <color> color-statusbar-bg: #111111; // Added status bar background color
    property <length> button-border-radius: 8px;
    width: 800px;
    height: 480px;
    background: color-background; // Apply main background color

    // --- State Properties ---
    in-out property <string> status_text: "Ready"; // Added status text property
    property <bool> show-list-view: false; // State to toggle views
    in property <[string]> list-items: []; // Data for the list view
    in-out property <string> fact: "";
    callback update-fact();
    callback button-pressed(int);
    in-out property <string> current_time: "00:00";
    in-out property <string> wifi_symbol: "ğŸ›œâŒ";
    in-out property <[string]> button-names: [];
    
    // This is just to embed these glyphs into the build
    Text {
        text: "âŒ¨ï¸ ğŸ…°ï¸ ğŸ”  ğŸ”¡ â†©ï¸ â âŒ« âŒ¦ ğŸ”¢ ğŸ”¤ ğŸ”£ ğŸ–±ï¸ ğŸ–²ï¸ â¯ï¸ â¸ï¸ â¹ï¸ âºï¸ â­ï¸ â®ï¸ â© âª ğŸ”Š ğŸ”‰ ğŸ”‡ ğŸ“‹ âœ‚ï¸ ğŸ“ ğŸ—‘ï¸ ğŸ–¥ï¸ ğŸ’» ğŸ§‘â€ğŸ’» ğŸ”’ ğŸ”“ ğŸ” ğŸ”€ ğŸ›‘ â¬†ï¸ â¬‡ï¸ â¬…ï¸ â¡ï¸ â†”ï¸ â†•ï¸ ğŸ”„ ğŸŒ ğŸ¦Š ğŸ§­ ğŸ§© ğŸ—‚ï¸ ğŸ—ƒï¸ ğŸ—„ï¸ ğŸ—’ï¸ ğŸ—“ï¸ ğŸ•’ ğŸ“¨ ğŸ“§ ğŸ–¨ï¸ ğŸ‘‹ ğŸ  ğŸ ğŸƒ ğŸ’¤ ğŸ”” ğŸ› ï¸ ğŸ·ï¸ â­ ğŸ† ğŸ§¹ ğŸ§² ğŸ§° ğŸ§ª ğŸš€ ğŸ§­";
        visible: false;
    }

    VerticalLayout {
        padding: 15px;
        spacing: 10px;

        // --- Header ---
        HeaderView {
            color-text: root.color-text;
            color-text-muted: root.color-text-muted;
            wifi_symbol: root.wifi_symbol;
            current_time: root.current_time;
            status_text: root.status_text;
            show-list-view <=> root.show-list-view; // Two-way binding
        }

        // --- Main Content Container ---
        // This container stretches vertically
        // It will hold either the ButtonGridView or LogListView
        VerticalLayout {
            vertical-stretch: 1;
            horizontal-stretch: 1;
            if !root.show-list-view: ButtonGridView {
                color-button: root.color-button;
                color-button-text: root.color-button-text;
                color-accent: root.color-accent;
                button-border-radius: root.button-border-radius;
                button-names: root.button-names;
                button-pressed(idx) => {
                    root.button-pressed(idx);
                }
            }
            if root.show-list-view: LogListView {
                color-text: root.color-text;
                color-text-muted: root.color-text-muted;
                list-items: root.list-items;
            }
        }

        // --- Status Bar ---
        StatusBarView {
            color-statusbar-bg: root.color-statusbar-bg;
            color-text-muted: root.color-text-muted;
        }
    }
}
